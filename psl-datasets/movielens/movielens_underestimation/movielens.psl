// Neighborhood-based collaborative filtering
1.0 : rated(U,I1) & rated(U,I2) & rating(U,I1) & sim_items(I1,I2) >> rating(U,I2)^2
1.0 : rated(U1,I) & rated(U2,I) & rating(U1,I) & sim_users(U1,U2) >> rating(U2,I)^2

// Demographic and content based similarity
1.0 : rated(U,I1) & rated(U,I2) & rating(U,I1) & sim_content_items(I1,I2) >> rating(U,I2)^2
1.0 : rated(U,I1) & rated(U,I2) & rating(U1,I) & sim_demo_users(U1,U2) >> rating(U2,I)^2

// Predictions by local non-negative matrix factorization and naive bayes predictor
1.0 : nmf_rating(U, I) & target(U, I) >> rating(U, I)^2
1.0 : rating(U, I) & target(U, I) >> nmf_rating(U, I)^2

1.0 : nb_rating(U, I) & target(U, I) >> rating(U, I)^2
1.0 : rating(U, I) & target(U, I) >> nb_rating(U, I)^2

// Mean-Centering
1.0 : avg_user_rating(U) & target(U,I) >> rating(U, I)^2
1.0 : rating(U) & target(U,I) >> avg_user_rating(U, I)^2

1.0 : avg_item_rating(I) & target(U,I) >> rating(U, I)^2
1.0 : rating(I) & target(U,I) >> avg_item_rating(U, I)^2

// Underestimation Unfairness
// Minimizes the inconsistency in underestimation of true ratings across groups
// U_under = 1/n \sum_j |max{0, average_true_rating_j_g1 - average_predicted_rating_j_g1} -
//                       max{0, average_true_rating_j_g2 - average_predicted_rating_j_g2}|

// predicted preference
preference(+U, I)/(|U|+1) = group_1_avg_item_preference(I) . {U: group_1(U) & target(U, I)}
rating(+U, I)/(|U|+1) = group_1_avg_item_rating(I) . {U: group_1(U) & target(U, I)}

preference(+U, I)/(|U|+1) = group_2_avg_item_preference(I) . {U: group_2(U) & target(U, I)}
rating(+U, I)/(|U|+1) = group_2_avg_item_rating(I) . {U: group_2(U) & target(U, I)}

1.0 : group_1(U) & preference(U, I) & target(U, I) >> rating(U, I)^2
1.0 : group_1(U) & rating(U, I) & target(U, I) >> preference(U, I)^2

1.0 : group_2(U) & preference(U, I) & target(U, I) >> rating(U, I)^2
1.0 : group_2(U) & rating(U, I) & target(U, I) >> preference(U, I)^2

// observed preference
rating(U, I) & observed(U, I) = preference(U, I) .
